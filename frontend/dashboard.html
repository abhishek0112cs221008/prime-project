<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prime Project - Admin Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <nav class="nav">
        <a href="index.html" class="nav-brand-logo">
            <span class="logo-pri">pri</span><span class="logo-me">me</span><span class="logo-project">project</span>
        </a>
        <div class="nav-links">
            <a href="dashboard.html" style="color: var(--accent-color)">
                <svg viewBox="0 0 24 24">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" />
                </svg>
                Dashboard
            </a>
            <a href="index.html">
                <svg viewBox="0 0 24 24">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                </svg>
                Projects
            </a>
            <a href="cart.html">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" />
                </svg>
                Cart
            </a>
            <span id="auth-links"></span>
        </div>
        <div class="flip-clock">
            <div class="flip-unit" id="hr1">0</div>
            <div class="flip-unit" id="hr2">0</div>
            <span class="clock-sep">:</span>
            <div class="flip-unit" id="min1">0</div>
            <div class="flip-unit" id="min2">0</div>
            <span class="clock-sep">:</span>
            <div class="flip-unit" id="sec1">0</div>
            <div class="flip-unit" id="sec2">0</div>
            <span class="clock-ampm" id="ampm">AM</span>
        </div>
        <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Theme">◐</button>
    </nav>
    <script src="js/watch.js"></script>

    <div class="container">
        <h1>Overview</h1>

        <div id="admin-stats"
            style="display:none; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; margin-top: 40px;">
            <div class="product-card" style="align-items: flex-start; text-align: left;">
                <h3 style="color: var(--text-secondary); font-weight: 500;">Total Projects</h3>
                <p id="stat-prod" style="font-size: 48px; font-weight: 700; color: var(--text-color); margin: 10px 0;">
                    --</p>
            </div>
            <div class="product-card" style="align-items: flex-start; text-align: left;">
                <h3 style="color: var(--text-secondary); font-weight: 500;">Total Users</h3>
                <p id="stat-users" style="font-size: 48px; font-weight: 700; color: var(--text-color); margin: 10px 0;">
                    --</p>
            </div>
            <div class="product-card" style="align-items: flex-start; text-align: left;">
                <h3 style="color: var(--text-secondary); font-weight: 500;">Total Orders</h3>
                <p id="stat-orders"
                    style="font-size: 48px; font-weight: 700; color: var(--text-color); margin: 10px 0;">--</p>
            </div>
        </div>

        <div style="margin-top: 60px; text-align: center;">
            <a href="index.html"><button style="width: auto;">Go to Projects</button></a>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <p>Copyright © 2026 VOYA Inc. All rights reserved.</p>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Use</a>
                <a href="#">Sales and Refunds</a>
                <a href="#">Legal</a>
                <a href="#">Site Map</a>
            </div>
        </div>
    </footer>

    <script src="js/api.js"></script>
    <script>
        if (!requireLogin()) throw new Error("Redirecting");

        const user = checkLogin();
        if (user.role === 'admin') {
            document.getElementById('admin-stats').style.display = 'grid';
            loadStats();
        } else {
            alert('Access Denied');
            window.location.href = 'index.html';
        }

        async function loadStats() {
            try {
                const stats = await Api.get('/dashboard/stats');
                document.getElementById('stat-prod').innerText = stats.totalProducts;
                document.getElementById('stat-users').innerText = stats.totalCustomers;
                document.getElementById('stat-orders').innerText = stats.totalOrders;
            } catch (e) { }
        }
    </script>
</body>

</html>